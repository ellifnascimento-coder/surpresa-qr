<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>carregando surpresa...</title>

<style>
/* =====================
   üé® PERSONALIZA√á√ÉO
   ===================== */

:root{
  --bg:#0f0f14;
  --text:#ffffff;
  --btn:#2196f3; /* üîµ AZUL */
  --btn-text:#fff;
}

/* ===================== */

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:monospace;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
  text-align:center;
}

.card{
  max-width:520px;
}

.floating{
  position:fixed; /* üî• em vez de absolute */
  font-size:11px;
  opacity:.15;
  pointer-events:none;
  white-space:nowrap;
}

button{
  margin-top:30px;
  padding:14px 28px;
  border:none;
  border-radius:12px;
  font-size:16px;
  background:var(--btn);
  color:var(--btn-text);
  cursor:pointer;
  transition:.2s;
}

button:hover{
  transform:scale(1.05);
}

/* loading piscando */
.blink{
  animation:blink 0.8s infinite;
}
@keyframes blink{
  50%{opacity:.3}
}

/* barra real */
.progress{
  width:100%;
  height:16px;
  background:#333;
  border-radius:10px;
  margin-top:20px;
  overflow:hidden;
}
.bar{
  height:100%;
  width:0%;
  background:#2196f3;
  transition:.2s;
}

/* tela erro */
.error{
  font-family: monospace;
  color:#ff5555;
  text-align:left;
  white-space:pre-line;
}

/* textos pequenos espalhados */
.floating{
  position:absolute;
  font-size:11px;
  opacity:.25;
}

</style>
</head>

<body>
<div class="card" id="card">
  <div id="content"></div>
  <div id="buttons"></div>
</div>

<script>
const content = document.getElementById("content");
const buttons = document.getElementById("buttons");
const card = document.getElementById("card");

let step = 0;

/* ========= SOM GLOBAL ========= */
let audioCtx;

function getCtx(){
  if(!audioCtx){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }
  return audioCtx;
}

function beep(freq=700, duration=80){

  const ctx = getCtx();

  const osc = ctx.createOscillator();
  const gain = ctx.createGain();

  osc.type="square";
  osc.frequency.value=freq;

  gain.gain.value=0.05;

  osc.connect(gain);
  gain.connect(ctx.destination);

  osc.start();
  osc.stop(ctx.currentTime + duration/1000);
}

/* erro glitch */
function errorNoise(){
  for(let i=0;i<7;i++){
    setTimeout(()=>beep(150+Math.random()*200,60), i*70);
  }
}


/* =============================
   FUN√á√ÉO BOT√ÉO PADR√ÉO
============================= */
function setButton(text, action){
  buttons.innerHTML = "";
  const b = document.createElement("button");
  b.innerText = text;
  b.onclick = action;
  buttons.appendChild(b);
}

/* =============================
   ETAPA 1
============================= */
function etapa1(){
content.innerHTML = `
voc√™ acabou de escanear um QR Code.<br><br>
n√£o tem volta.
`;
setButton("seguir mesmo assim", etapa2);
}

/* =============================
   ETAPA 2 ‚Äì piscando + SOM
============================= */
function piscar(el, textoFinal, delay, freq){

  setTimeout(()=>{

    el.classList.add("blink");

    // üîä som repetindo enquanto pisca
    const som = setInterval(()=>{
      beep(freq, 60);
    }, 120);

    // tempo total piscando
    setTimeout(()=>{

      clearInterval(som); // para som
      el.classList.remove("blink");
      el.textContent = textoFinal;

      beep(freq+200, 120); // bip final de confirma√ß√£o

    }, 700);

  }, delay);
}
piscar(s,"surpresa: OK",600,900);
piscar(c,"confus√£o: OK",1400,650);
piscar(j,"julgamento silencioso: PROV√ÅVEL",2200,450);

}

/* =============================
   ETAPA 3 ‚Äì barra real + % VIS√çVEL
============================= */
function etapa3(){

content.innerHTML=`
carregando conte√∫do de baixa qualidade...<br><br>

<div class="progress">
  <div class="bar" id="bar"></div>
</div>

<div id="percent" style="margin-top:15px;font-size:20px;font-weight:bold">
0%
</div>
`;

buttons.innerHTML="";

const bar=document.getElementById("bar");
const percent=document.getElementById("percent");

let width=0;

const interval=setInterval(()=>{

  width++;

  bar.style.width = width+"%";
  percent.textContent = width+"%";

  if(width>=100){
    clearInterval(interval);
    percent.textContent="100% ‚úì";
    setButton("aceitar termos que n√£o li", etapa4);
  }

},20);

}

/* =============================
   ETAPA 4 ‚Äì tela erro forte
============================= */
function etapa4(){

content.innerHTML=`
<div class="error">
ERROS FATAIS DETECTADOS

[FAIL] QR Code em flores
[FAIL] essa p√°gina existir
[CRITICAL] voc√™ ainda aqui

Sistema inst√°vel.
Recomendado: fechar o navegador.
</div>
`;
errorNoise(); // 
setButton("continuar por curiosidade", etapa5);
}

/* =============================
   ETAPA 5
============================= */
function etapa5(){

content.innerHTML=`
isso N√ÉO √© um flerte.<br>
talvez seja.<br>
depende do ponto de vista.<br>
dos astros.<br>
e do seu humor hoje.<br>
`;

setButton("ok mas quero ver", etapa6);
}

/* =============================
   ETAPA 6 ‚Äì respira√ß√£o + textos espalhados
============================= */
function etapa6(){

content.innerHTML=`
PAUSA OBRIGAT√ìRIA.<br><br>
<span id="respira" style="font-size:22px;opacity:.8">inspira‚Ä¶</span>
`;

const r = document.getElementById("respira");

let estado = true;

/* alterna inspira/expira */
setInterval(()=>{
  r.innerText = estado ? "expira‚Ä¶" : "inspira‚Ä¶";
  r.style.opacity = estado ? ".3" : "1";
  estado = !estado;
}, 900);


/* remove antigos */
document.querySelectorAll(".floating").forEach(e=>e.remove());

/* espalha pela TELA INTEIRA (n√£o no card) */
for(let i=0;i<30;i++){

  const t=document.createElement("div");

  t.className="floating";
  t.innerText="*observa√ß√£o irrelevante: eu sou meio apaixonada por voc√™";

  t.style.left=Math.random()*100+"vw";
  t.style.top=Math.random()*100+"vh";
  t.style.transform=`rotate(${Math.random()*30-15}deg)`;

  document.body.appendChild(t);
}

setButton("fingir que n√£o li e continuar", etapa7);
}

/* =============================
   ETAPA 7 ‚Äì psicologia reversa
============================= */
function etapa7(){

content.innerHTML=`
aviso:<br>
nada aqui faz sentido.<br>
a curiosidade venceu.
`;

buttons.innerHTML="";

const sim=document.createElement("button");
sim.innerText="continuar";

const nao=document.createElement("button");
nao.innerText="parar";

buttons.appendChild(sim);
buttons.appendChild(nao);

let fugidas=0;

/* CONTINUAR fugindo */
sim.onmouseover = ()=>{

  fugidas++;

  sim.style.position="absolute";
  sim.style.left=Math.random()*80+"%";
  sim.style.top=Math.random()*80+"%";

  if(fugidas>=5){
    const perdeu = confirm("j√° perdeu a paci√™ncia?");
    
    if(!perdeu){
      content.innerHTML += `<br><br><small style="opacity:.5">para de mentir pra si mesma.</small>`;
      return;
    }

    mostrarSabia();
  }
};

/* PARAR normal */
nao.onclick = ()=>{
  content.innerHTML += `<br><br><small style="opacity:.5">para de mentir pra si mesma.</small>`;
};
}

/* =============================
   SABIA + bot√£o final
============================= */
function mostrarSabia(){

content.innerHTML=`
sabia.
`;

setButton("ok, termina logo isso", etapa8);

}


/* =============================
   ETAPA 8
============================= */
function etapa8(){
content.innerHTML=`
parab√©ns.<br>
voc√™ chegou at√© o final.<br>
ningu√©m pediu por isso.
`;
setButton("ver conclus√£o", mostrarShrek);
}

/* =============================
   SHREK
============================= */
function mostrarShrek(){
document.body.innerHTML=`
<iframe
  width="100%"
  height="100%"
  src="https://www.youtube.com/embed/_2aN_aXrQsw?autoplay=1"
  frameborder="0"
  allow="autoplay; fullscreen"
  allowfullscreen
></iframe>
`;
}

etapa1();
</script>
</body>
</html>
